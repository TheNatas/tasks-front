<div class="kanban-board">
  <div class="kanban-column unpaid">
    <h2>Unpaid</h2>
    <ul>
      <ng-container *ngFor="let bill of (bills$ | async)">
        <li *ngIf="!bill.paid">
          {{ bill.description }}<span *ngIf="bill.amount"> - ${{ bill.amount }}</span>
          <div class="bill-date">{{ bill.date | date:'dd/MM/yy' }}</div>
          <button (click)="markAsPaid(bill.id)">Mark as paid</button>
        </li>
      </ng-container>
    </ul>

    <button *ngIf="!showAddForm" (click)="toggleAddForm()" class="toggle-add-btn">
      <span class="plus-icon">+</span>
      Add Bill
    </button>

    <form *ngIf="showAddForm" (ngSubmit)="addBill()" #taskForm="ngForm" class="add-bill-form">
      <div class="form-group">
        <label for="bill-description">Description</label>
        <input
          id="bill-description"
          type="text"
          name="description"
          [(ngModel)]="newDescription"
          required
          placeholder="Enter bill description"
        />
      </div>
      <div class="form-group">
        <label for="bill-amount">Amount</label>
        <input
          id="bill-amount"
          type="number"
          name="amount"
          [(ngModel)]="newAmount"
          required
          placeholder="Enter amount"
          step="0.01"
          min="0"
        />
      </div>
      <div class="form-group">
        <label for="bill-date">Date</label>
        <input
          id="bill-date"
          type="date"
          name="date"
          [(ngModel)]="newDate"
          required
        />
      </div>
      <div class="form-actions">
        <button type="submit" [disabled]="taskForm.invalid" class="save-bill-btn">
          Save
        </button>
        <button type="button" (click)="toggleAddForm()" class="cancel-btn">
          Cancel
        </button>
      </div>
    </form>
  </div>
  <div class="kanban-column paid">
    <h2>Paid</h2>
    <ul>
      <ng-container *ngFor="let bill of (bills$ | async)">
        <li *ngIf="bill.paid">
          {{ bill.description }}<span *ngIf="bill.amount"> - ${{ bill.amount }}</span>
          <div class="bill-date">{{ bill.date | date:'dd/MM/yy' }}</div>
          <span>✔️ Paid</span>
        </li>
      </ng-container>
    </ul>
  </div>
</div>
